jQuery(document).ready(function(a){if("undefined"!=typeof wp.media){var e,i=a("#social-image-metabox"),t=function(a){var e=i.find(".social-image__error");return"undefined"!=typeof a?e.html(a).addClass("is-active"):e.removeClass("is-active")},n=function(a){return i.find(".button").toggleClass("disabled"),i.find(".spinner").toggleClass("is-active"),t()};i.on("click",".social-image__fullsize",function(e){e.preventDefault();var i=a(this).find(".social-image__preview").attr("src");if(i.length>0)return window.open(i,"_blank")}),i.on("click",".social-image__run",function(e){e.preventDefault();var s={action:"social_image_generate",post:i.data("post"),text:i.find(".social-image__text").val(),contrast:i.find(".social-image__contrast").val(),brightness:i.find(".social-image__brightness").val()},o=a.ajax({method:"POST",url:i.data("ajaxurl"),data:s},"json");return o.done(function(a){return n(!0),a.success===!1?t(a.data):(i.find(".social-image__delete").addClass("is-active"),i.find(".social-image__preview").attr("src",a.data))}),n()}),i.on("click",".social-image__library",function(s){return s.preventDefault(),e?e.open():(e=wp.media({title:social_image_options.choose,multiple:!1}),e.on("select",function(){var s=e.state().get("selection").first().toJSON(),o={action:"social_image__library",post:i.data("post"),url:s.url},r=a.ajax({method:"POST",url:i.data("ajaxurl"),data:o},"json");return r.done(function(a){return n(!0),a.success===!1?t(a.data):(i.find(".social-image__delete").addClass("is-active"),i.find(".social-image__preview").attr("src",a.data))}),n()}),e.open())}),i.on("click",".social-image__delete",function(e){e.preventDefault();var s={action:"social_image_delete",post:i.data("post")},o=a.ajax({method:"POST",url:i.data("ajaxurl"),data:s},"json");return o.done(function(a){return n(!0),a.success===!1?t(a.data):(i.find(".social-image__delete").removeClass("is-active"),i.find(".social-image__preview").attr("src",""))}),n()})}});